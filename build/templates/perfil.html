<div class="containerTablePedido">
    <div class="cerrarProfile" id="closeSesion" data-logout-url="{% url 'logout' %}">
        <i class="bx bx-log-out"></i>
        <span>Cerrar sesión</span>
    </div>
    <div class="boxProfile">
        <img class="imageProfile"
            src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTNgwRusbCDZfCIMrfXP0vziWPEqlEvhCb1mg&s"
            alt="mashmelo">
        <h2 class="card-title">Willy Alcala</h2>
    </div>
    <div class="profile__date">
        <div class="checkout__date-info">
            <div class="input-profile">
                <input type="text" id="nombreOr" class="checkbox-inputs" required>
                <label for="nombre" class="profile-labels">NOMBRES</label>
            </div>
            <div class="input-profile">
                <input type="text" id="apellidoOr" class="checkbox-inputs" required>
                <label for="apellido" class="profile-labels">APELLIDOS</label>
            </div>
        </div>
        <div class="input-profile">
            <input type="text" id="gmail" class="checkbox-inputs" disabled>
            <label for="gmail" class="profile-labels">CORREO</label>
        </div>
        <div class="input-profile">
            <input type="text" id="dniOr" class="checkbox-inputs" required>
            <label for="dni" class="profile-labels">DNI/RUC</label>
        </div>
        <div class="input-profile">
            <input type="text" id="direcionOr" class="checkbox-inputs" required>
            <label for="direcion" class="profile-labels">DIRECCIÓN</label>
        </div>
        <div class="checkout__date-info">
            <div class="input-profile">
                <input type="text" id="ciudadOr" class="checkbox-inputs" required>
                <label for="ciudad" class="profile-labels">CIUDAD</label>
            </div>
            <div class="input-profile">
                <select id="regionOr" class="checkbox-inputs selectProvincia" required>
                </select>
                <label for="regionOr" class="profile-labels">PROVINCIA</label>
            </div>
            <div class="input-profile">
                <input type="text" id="cod-postalOr" class="checkbox-inputs" required>
                <label for="cod-postal" class="profile-labels">COD postal(opc)</label>
            </div>
        </div>
        <div class="input-profile">
            <input type="text" id="telefonoOr" class="checkbox-inputs" required>
            <label for="telefono" class="profile-labels">TELÉFONO</label>
        </div>

        <div class="btn-updateProfile">
            <span>Actualizar</span>
        </div>
    </div>
</div>
<!-- <script>
    document.addEventListener('DOMContentLoaded', function () {
        // Seleccionar el botón de cerrar sesión por ID
        const logoutButton = document.getElementById("closeSesion");

        if (logoutButton) {
            logoutButton.addEventListener("click", function (e) {
                e.preventDefault();

                fetch("{% url 'logout' %}", {
                    method: "POST",
                    credentials: "same-origin",
                    headers: {
                        "X-Requested-With": "XMLHttpRequest",
                        "Content-Type": "application/json"
                    }
                })
                    .then(resp => {
                        if (!resp.ok) throw new Error("Logout falló");
                        return resp.json();
                    })
                    .then(() => {
                        localStorage.clear();
                        window.location.replace("{% url 'index' %}");
                    })
                    .catch(err => {
                        console.error(err);
                        alert("No se pudo cerrar sesión. Intenta de nuevo.");
                    });
            });
        }

        // Evitar volver atrás manualmente (historial)
        history.pushState(null, null, location.href);
        window.addEventListener('popstate', function () {
            history.pushState(null, null, location.href);
        });

        // Detectar navegación atrás o restauración desde caché
        window.addEventListener('pageshow', function (event) {
            if (event.persisted || (performance.getEntriesByType("navigation")[0]?.type === "back_forward")) {
                console.log("Detectado navegación hacia atrás usando caché, redirigiendo...");
                window.location.replace("{% url 'index' %}");
            }
        });
    });

</script> -->